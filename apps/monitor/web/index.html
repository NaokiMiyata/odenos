<!DOCTYPE html>
<!-- 
    Message sequence diagram
-->
<head>
<meta charset="UTF-8">
<title>OdenOS message sequence diagram</title>
<script type="text/javascript">
    function init() {
        var div = document.getElementById('diagram');
        var socket = new WebSocket("ws://localhost:8888/message",["protocolOne", "protocolTwo"]); 
        socket.onmessage = function (event) {
            var newElement = document.createElement('div');
            var message = event.data.split(",");
            if (message[1] == "") { 
                newElement.innerHTML = "<pre>" + message[0] + "</pre>";
            } else {
                newElement.innerHTML = "<pre>" + message[0] + "</pre> [<a href=http://localhost:8888/detail?serial=" + message[1] + ' target="detail">*</a>]';
            }
            div.appendChild(newElement);
            div.scrollIntoView(false);
        };
    }
</script>
<style type="text/css">
#header {
    width: 100%;
    background: #fee;
}
#main {
    float: left;
    width: 99.5%;
    height: 99.5%;
    overflow: auto;
}
pre {
    display: inline;
}
</style>

<body onload="init()"> 
<div id="header">
    <h2>OdenOS message sequence diagram</h2>
</div>
<div id="main">
    <div id="diagram"></div>
</div>
</body>
</html>
